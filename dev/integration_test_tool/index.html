<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Integration Test Tool · IntegrationTests.jl</title><meta name="title" content="Integration Test Tool · IntegrationTests.jl"/><meta property="og:title" content="Integration Test Tool · IntegrationTests.jl"/><meta property="twitter:title" content="Integration Test Tool · IntegrationTests.jl"/><meta name="description" content="Documentation for IntegrationTests.jl."/><meta property="og:description" content="Documentation for IntegrationTests.jl."/><meta property="twitter:description" content="Documentation for IntegrationTests.jl."/><meta property="og:url" content="https://qedjl-project.gitlab.io/IntegrationTests.jl/integration_test_tool/"/><meta property="twitter:url" content="https://qedjl-project.gitlab.io/IntegrationTests.jl/integration_test_tool/"/><link rel="canonical" href="https://qedjl-project.gitlab.io/IntegrationTests.jl/integration_test_tool/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">IntegrationTests.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>Integration Test Tool</a><ul class="internal"><li class="toplevel"><a class="tocitem" href="#Package-Filter"><span>Package Filter</span></a></li><li><a class="tocitem" href="#Package-Filter:-Special-Cases"><span>Package Filter: Special Cases</span></a></li><li class="toplevel"><a class="tocitem" href="#Project-Dependency-Tree"><span>Project Dependency Tree</span></a></li><li><a class="tocitem" href="#Project-Dependency-Tree:-Special-cases"><span>Project Dependency Tree: Special cases</span></a></li></ul></li><li><a class="tocitem" href="../pipeline_tutorials/">Pipeline Tutorials</a></li><li><a class="tocitem" href="../api/">References</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Integration Test Tool</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Integration Test Tool</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/QEDjl-project/IntegrationTests.jl " title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/QEDjl-project/IntegrationTests.jl /blob/dev/docs/src/integration_test_tool.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Integration-Test-Tool"><a class="docs-heading-anchor" href="#Integration-Test-Tool">Integration Test Tool</a><a id="Integration-Test-Tool-1"></a><a class="docs-heading-anchor-permalink" href="#Integration-Test-Tool" title="Permalink"></a></h1><p>The public API <code>IntegrationTests.jl</code> provides a function called <code>depending_projects()</code>, which returns a vector of package names that depend on the package <code>package_name</code>. In addition to the package name, the function also requires a package name filter <code>package_filter</code> and a project dependency tree <code>project_tree</code>. The project dependency can be constructed from the currently active Julia project environment, which is highly recommended.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="IntegrationTests.depending_projects-Tuple{AbstractString, Union{Regex, AbstractString}, AbstractDict}" href="#IntegrationTests.depending_projects-Tuple{AbstractString, Union{Regex, AbstractString}, AbstractDict}"><code>IntegrationTests.depending_projects</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">depending_projects(
    package_name::AbstractString, 
    package_filter::Union{&lt;:AbstractString,Regex}
    project_tree::AbstractDict=PkgDependency.builddict(Pkg.project().uuid, Pkg.project())
) -&gt; Vector{String}</code></pre><p>Returns a list of packages that have the package <code>package_name</code> as a dependency. </p><p><strong>Arguments</strong></p><ul><li><code>package_name</code>: Name of the dependency</li><li><code>package_filter</code>: Ignore all packages that do not match <code>package_filter</code>. This includes the        top node package of the graph. Child nodes are always checked for <code>package_name</code>, but        they are not traversed if they do not match <code>package_filter</code>.</li><li><code>project_tree</code>: Project tree in which to search for dependent packages. Each (sub-)package        needs to be <code>AbstractDict{String, AbstractDict}</code></li></ul><p><strong>Returns</strong></p><p>A <code>Vector{String}</code> containing the names of all packages that have the given dependency.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/QEDjl-project/IntegrationTests.jl /blob/9bdabc4a829f039be060f1417f591e8adf0fcff2/src/IntegrationTests.jl#L8-L30">source</a></section></article><p>An example for using the <code>depending_projects()</code> function may look as follows:</p><pre><code class="language-julia-repl hljs">julia&gt; using IntegrationTests
[ Info: Precompiling IntegrationTests [6be7cfa2-1838-408e-bc49-3a824ac3a1fb]

julia&gt; using Pkg

julia&gt; Pkg.activate(&quot;.ci/example_project/MetaTestPkg/&quot;)
  Activating project at `~/projects/IntegrationTests.jl/.ci/example_project/MetaTestPkg`

julia&gt; depending_projects(&quot;MyPkgFields&quot;, r&quot;MyPkg*&quot;)
2-element Vector{String}:
 &quot;MyPkgProcesses&quot;
 &quot;MyPkgMain&quot;

julia&gt;</code></pre><h1 id="Package-Filter"><a class="docs-heading-anchor" href="#Package-Filter">Package Filter</a><a id="Package-Filter-1"></a><a class="docs-heading-anchor-permalink" href="#Package-Filter" title="Permalink"></a></h1><p>The <code>package_filter</code> is a string or a regular expression, which constrains the search space of the dependency graph. All packages and dependencies of packages must match the filter, otherwise they are ignored during searching. For instance, if we set the package filter to <code>r&quot;^MyPkg*&quot;</code>, the packages <code>MyPkgMain</code>, <code>MyPkgA</code>, <code>MyPkgB</code>, and <code>MyPkgC</code> are traversed in the following diagram. <code>ExternalDep1</code> and <code>ExternalDep2</code> are ignored.</p><div class="mermaid">graph TD
    MyPkgMain --&gt;|using| MyPkgA
    MyPkgMain --&gt;|using| MyPkgB
    MyPkgMain --&gt;|using| ExternDep1
    MyPkgA --&gt;|using| MyPkgC
    MyPkgA --&gt;|using| ExternDep2</div><p>The idea behind the package filter is that there are nodes in the dependency graph that can&#39;t be changed directly. Let&#39;s assume we are the maintainer of all packages starting with <code>MyPkg</code> and the following dependency graph is given:</p><div class="mermaid">graph TD
    MyPkgMain --&gt;|using| MyPkgA
    MyPkgMain --&gt;|using| MyPkgB
    MyPkgMain --&gt;|using| ExternDep1 --&gt;|using| MyPkgA
    MyPkgA --&gt;|using| MyPkgC
    MyPkgA --&gt;|using| ExternDep2</div><p>With the package filter <code>r&quot;*&quot;</code>, which means traversing all dependencies, the result would be <code>[&quot;MyPkgMain&quot;, &quot;ExternDep1&quot;]</code> if we are searching for <code>MyPkgA</code>. We are not the maintainer of <code>ExternDep1</code>, therefore we can not directly make changes in <code>ExternDep1</code> and it makes less sense to test <code>ExternDep1</code> with our code changes.</p><h2 id="Package-Filter:-Special-Cases"><a class="docs-heading-anchor" href="#Package-Filter:-Special-Cases">Package Filter: Special Cases</a><a id="Package-Filter:-Special-Cases-1"></a><a class="docs-heading-anchor-permalink" href="#Package-Filter:-Special-Cases" title="Permalink"></a></h2><h3 id="Dependencies-of-non-matching-packages"><a class="docs-heading-anchor" href="#Dependencies-of-non-matching-packages">Dependencies of non matching packages</a><a id="Dependencies-of-non-matching-packages-1"></a><a class="docs-heading-anchor-permalink" href="#Dependencies-of-non-matching-packages" title="Permalink"></a></h3><p>In the following diagram, <code>MyPkgA</code> is not found with the package filter <code>r&quot;^MyPkg*&quot;</code>, because the traversing algorithm does not traverse <code>ExternDep1</code>. Therefore the dependencies of <code>ExternDep1</code> are not checked.</p><div class="mermaid">graph TD
    MyPkgMain --&gt;|using| ExternDep1 --&gt;|using| MyPkgA</div><h3 id="The-top-graph-package"><a class="docs-heading-anchor" href="#The-top-graph-package">The top graph package</a><a id="The-top-graph-package-1"></a><a class="docs-heading-anchor-permalink" href="#The-top-graph-package" title="Permalink"></a></h3><p>Sometimes the top graph package does not have the same naming scheme as all other packages. The section <a href="#Project-Dependency-Tree">Project Dependency Tree</a> contains examples of this. If the top package is not included in the package filter, the entire graph is not traversed and the result is empty.</p><div class="mermaid">graph TD
    MetaTestPkg --&gt;|using| MyPkgMain --&gt;|using| MyPkgA
    MyPkgMain --&gt;|using| MyPkgB</div><p><code>depending_projects()</code> returns <code>[]</code> for the package filter <code>r&quot;^MyPkg*&quot;</code> and the package <code>MyPkgB</code>. The package filter <code>r&quot;^MyPkg*|^MetaTestPkg$</code> returns <code>[&quot;MyPkgA&quot;]</code>.</p><h1 id="Project-Dependency-Tree"><a class="docs-heading-anchor" href="#Project-Dependency-Tree">Project Dependency Tree</a><a id="Project-Dependency-Tree-1"></a><a class="docs-heading-anchor-permalink" href="#Project-Dependency-Tree" title="Permalink"></a></h1><p>We strongly recommend using a <code>Project.toml</code> of a package from the package ecosystem as input for <code>depending_projects()</code> instead of manually defining the project dependency graph. This is because a manually defined dependency tree can become obsolete. In contrast, the <code>Project.toml</code> must be up to date, otherwise, the Julia application will not work.</p><p>The crucial question is which <code>Project.toml</code> should be used. The dependency graph of a <code>Project.toml</code> can only be constructed in one direction. You can only use the dependencies of the packages. From which package a package is used can only be determined if you came from the package before. Let&#39;s assume we have the following package ecosystem:</p><div class="mermaid">graph TD
    MyPkgMain --&gt;|using| MyPkgA
    MyPkgMain --&gt;|using| MyPkgB --&gt;|using| MyPkgD
    MyPkgB --&gt;|using| MyPkgE --&gt;|using| MyPkgF
    MyPkgMain --&gt;|using| MyPkgC</div><p>If we take the <code>Project.toml</code>[*] of <code>MyPkgMain</code>, we get the complete graph. If we take the <code>Project.toml</code> of <code>MyPkgB</code>, we get the following graph:</p><div class="mermaid">graph TD
    MyPkgB --&gt;|using| MyPkgD
    MyPkgB --&gt;|using| MyPkgE --&gt;|using| MyPkgF</div><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>The dependency tree created with the <code>Project.toml</code> of <code>MyPkgMain</code> does not contain <code>MyPkgMain</code> itself. This is a technical detail from Julia. It will contain the dependencies <code>MyPkgA</code> to <code>MyPkgF</code>. To solve the problem, an additional package is needed, which has only the dependency <code>MyPkgMain</code>:</p><p><code>Project.toml</code></p><pre><code class="language-yaml hljs">name = &quot;MetaTestPkg&quot;
uuid = &quot;b849e8ad-e76f-4e2e-b89d-52f4e57509ba&quot;
authors = [&quot;Simeon Ehrig &lt;s.ehrig@hzdr.de&gt;&quot;]
version = &quot;0.1.0&quot;

[deps]
MyPkgMain = &quot;679daff0-1f79-468a-9a2e-69c3994cafb1&quot;</code></pre><p>If we use the <code>Project.toml</code> of <code>MetaTestPkg</code>, we get the complete dependency graph with <code>MyPkgMain</code>.</p></div></div><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>To select a package and create the dependency graph, you need to activate the Julia environment of the package with <code>Pkg.activate()</code>. For example, <code>Pkg.activate(&quot;path/to/MetaTestPkg&quot;)</code>.</p></div></div><h2 id="Project-Dependency-Tree:-Special-cases"><a class="docs-heading-anchor" href="#Project-Dependency-Tree:-Special-cases">Project Dependency Tree: Special cases</a><a id="Project-Dependency-Tree:-Special-cases-1"></a><a class="docs-heading-anchor-permalink" href="#Project-Dependency-Tree:-Special-cases" title="Permalink"></a></h2><p>Let&#39;s assume we have the following package ecosystem structure:</p><div class="mermaid">graph TD
    MyPkgA --&gt;|using| MyPkgD
    MyPkgB --&gt;|using| MyPkgD
    MyPkgB --&gt;|using| MyPkgE
    MyPkgC --&gt;|using| MyPkgE
    MyPkgC --&gt;|using| MyPkgF
    MyPkgD --&gt;|using| MyPkgG
    MyPkgD --&gt;|using| MyPkgH
    MyPkgE --&gt;|using| MyPkgI</div><p>There is no package we can use to build the entire dependency graph. Therefore, an auxiliary package is required to generate the integration tests for the whole ecosystem:</p><div class="mermaid">graph TD
    MetaTestPkg --&gt;|using| MyPkgA
    MetaTestPkg --&gt;|using| MyPkgB
    MetaTestPkg --&gt;|using| MyPkgC
    MyPkgA --&gt;|using| MyPkgD
    MyPkgB --&gt;|using| MyPkgD
    MyPkgB --&gt;|using| MyPkgE
    MyPkgC --&gt;|using| MyPkgE
    MyPkgC --&gt;|using| MyPkgF
    MyPkgD --&gt;|using| MyPkgG
    MyPkgD --&gt;|using| MyPkgH
    MyPkgE --&gt;|using| MyPkgI</div><p>If we use the <code>Project.toml</code> of <code>MetaTestPkg</code>, we can construct the entire graph.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>The &quot;MetaTestPkg&quot; does not need to be registered. It can be saved locally in the project repository or created dynamically during the generation of the integration tests.</p></div></div><script type="module">import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
mermaid.initialize({
    startOnLoad: true,
    theme: "neutral"
});
</script></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><a class="docs-footer-nextpage" href="../pipeline_tutorials/">Pipeline Tutorials »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.2.1 on <span class="colophon-date" title="Thursday 1 February 2024 08:40">Thursday 1 February 2024</span>. Using Julia version 1.9.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
